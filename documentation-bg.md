# Игра с животни

Конзолна игра, която се опитва да познае животното, което играчът си е намислил.

Реализирана е на [Clojure](http://clojure.org/) и използва [leiningen](http://leiningen.org/) за build-tool.

За да пуснете играта изпълнете:
```
lein run
```

За да пуснете наличните unit тестове изпълнете:
```
lein test
```

## Инструкции за игра
Играта задава въпроси, на които приема отговор 'да' или 'не'. Целта е да познае животното, което играчът си е намислил.

Ако не успее задава въпрос, който да бъде използван за да познае животното в следваща игра.

### Примери
Тук играта познава животното и приключва изпълнението си.
```
Хищник ли е?
да
Топлокръвно ли е?
не
Животното бяла акула ли е?
да
Благодаря, че играхме!
```
Тук написаното животно е грешно и играта се опитва да го познае:
```
Хищник ли е?
да
Топлокръвно ли е?
не
Животното бяла акула ли е?
не
Предавам се. Кое е твоето животно?
Питон
Какво да питам за да го различа от бяла акула?
Може ли да плува?
Питон отговаря ли с 'Да' на въпроса?
не
Благодаря, запомних!
```
Следващия път, когато опитаме същата последователност от отговори, играта задава допълнителния въпрос:
```
Хищник ли е?
да
Топлокръвно ли е?
не
Два крака ли има?
не
Може ли да плува?
не
Животното Питон ли е?
да
Благодаря, че играхме!
```
Друг вариант за изход от играта е да се стигне до последователност от отговори, за които няма познато животно:
```
Хищник ли е?
не
Топлокръвно ли е?
да
Два крака ли има?
да
По-голямо ли е от човек?
да
Не познавам това животно. Как се казва?
тиранозавър
Животното бе добавено!
```
При следващ опит за същата последователност:
```
Хищник ли е?
не
Топлокръвно ли е?
да
Два крака ли има?
да
По-голямо ли е от човек?
да
Животното тиранозавър ли е?
да
Благодаря, че играхме!
```

## Описание на използвания алгоритъм

Играта започва от функцията `-main`. Тя конвертира използваните `json` файлове за запазване на данните в обекти. Построява дърво на решенията и след това се опитва да познае животното.

### JSON файловете

Играта използва два файла, за да запазва данните, които използва за работа.

Първият е `animals.json`. В него има масив от обекти, всеки от които носи характеристиките на едно животно. Всяко животно може и да няма вкарани знанията за всички характеристики.
Примерна извадка от файла:
```json
{
    "name": "котка",
    "isItTwolegged": false,
    "isItWarmBlooded": true,
    "isItFurry": true,
    "isItFlying": false,
    "isItSwimming": false,
    "isItDigging": false,
    "isItPredator": true,
    "isItWild": false,
    "isItLargerThanMan": false
}
```
Всяка характеристика на животно отговаря на въпрос от файла `questions.json`.
Той е `map`, в който всеки ключ отговаря на характеристика, а всяка стойност - на въпрос.

Примерна извадка:
```json
  ...
  "isItTwolegged": "Два крака ли има?",
  "isItWarmBlooded": "Топлокръвно ли е?",
  ...
```

### Построяване на дървото на решенията

Функцията `build-decision-tree` е отговорна за построяването на дърво на решенията.
В него листата отговарят на животни. Всеки връх отговаря на характеристика, левите му деца
са тези, които не отговарят на характеристиката, а десните - които отговарят.
Животните, за които не се знае, дали отговарят на дадена характеристика при построяването
на дървото се намират и в двете поддървета на съответната характеристика.

Функцията взема характеристика от списъка с въпроси и после разделя всички животни според нея.
Функцията се повтаря рекурсивно за получените две поддървета, докато не се стигне до листа.

Примерно дърво:

```
            isSwimming
      :false          :true
     isMammal        isMammal
  :false  :true   :false  :true
 врабче   котка   акула   делфин
```

Функцията `guess-animal` отговаря за познаването на животното.
Тя задава въпроси, докато стигне до листо и връща листото, то може да е `nil` или да е животно.

`-main` се грижи според резултата от `guess-animal` и отговора на потребителя да попълни знанията на програмата.
Характеристиката е въпросът с тирета вместо интервали и се добавя на новото животно и на старото ако има две, които отговарят на едни и същи въпроси.
